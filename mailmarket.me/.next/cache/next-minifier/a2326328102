{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{NYfH:function(t,e,s){\"use strict\";s.r(e),s.d(e,\"default\",(function(){return T}));var i=s(\"o0o1\"),a=s.n(i),n=s(\"1OyB\"),o=s(\"vuIU\"),l=s(\"JX7q\"),r=s(\"Ji7U\"),c=s(\"md7G\"),u=s(\"foSv\"),d=s(\"q1tI\"),m=s.n(d),h=s(\"nOHt\"),p=s.n(h),f=s(\"8Kt/\"),v=s.n(f),g=s(\"lsd1\"),b=s(\"vDqi\"),y=s.n(b),N=m.a.createElement;function S(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var T=function(t){Object(r.a)(i,t);var e,s=(e=i,function(){var t,s=Object(u.a)(e);if(S()){var i=Object(u.a)(this).constructor;t=Reflect.construct(s,arguments,i)}else t=s.apply(this,arguments);return Object(c.a)(this,t)});function i(t){var e;return Object(n.a)(this,i),(e=s.call(this,t)).typingTimeout=null,e.state={sent:0,points:0,pointsToUse:0,from:null,subject:null,msgToSend:null,customEmailList:[],totalEmailsSent:0,pageLoading:!0,decisor:!1,decisorLoading:!1,decisorResult:!1,products:!1},e.setDecisorOn=e.setDecisorOn.bind(Object(l.a)(e)),e.setDecisorOff=e.setDecisorOff.bind(Object(l.a)(e)),e.setProductsOn=e.setProductsOn.bind(Object(l.a)(e)),e.setProductsOff=e.setProductsOff.bind(Object(l.a)(e)),e.setPointsToUse=e.setPointsToUse.bind(Object(l.a)(e)),e.setMsgToSend=e.setMsgToSend.bind(Object(l.a)(e)),e.setFrom=e.setFrom.bind(Object(l.a)(e)),e.setSubject=e.setSubject.bind(Object(l.a)(e)),e.setCustomEmailList=e.setCustomEmailList.bind(Object(l.a)(e)),e.sendRequest=e.sendRequest.bind(Object(l.a)(e)),e}return Object(o.a)(i,[{key:\"componentDidMount\",value:function(){var t=this;this.props.loggedIn&&null!=this.props.id&&y()({url:\"/api/user\",method:\"POST\",data:{id:this.props.id}}).then((function(e){t.setState({pageLoading:!1,sent:e.data.sent,points:e.data.points,totalEmailsSent:e.data.totalEmailsSent})})).catch((function(t){return p.a.push(\"/login\")}))}},{key:\"sendRequest\",value:function(){var t=this;null!=this.state.msgToSend?(this.setState({decisorLoading:!0}),y()({url:\"/api/mailer\",method:\"POST\",data:{id:this.props.id,pointsToUse:this.state.pointsToUse,from:this.state.from,subject:this.state.subject,msgToSend:this.state.msgToSend,customEmailList:this.state.customEmailList}}).then((function(e){200==e.status&&t.setState({decisor:!1,decisorLoading:!1,decisorResult:!0,points:t.state.points-t.state.pointsToUse,pointsToUse:0,sent:parseInt(t.state.sent)+parseInt(t.state.pointsToUse),totalEmailsSent:t.state.pointsToUse+t.state.totalEmailsSent,customEmailList:[]})})).catch((function(e){t.setState({decisorLoading:!1,decisorResult:!1})}))):alert(\"Your message is empty!\")}},{key:\"setPointsToUse\",value:function(t){var e=this;clearTimeout(this.typingTimeout);var s=t.target.value;this.typingTimeout=setTimeout((function(){e.setState({pointsToUse:e.state.customEmailList.length>0?parseInt(s)+e.state.customEmailList.length:parseInt(s)})}),500)}},{key:\"setFrom\",value:function(t){this.setState({from:t.target.value})}},{key:\"setSubject\",value:function(t){this.setState({subject:t.target.value})}},{key:\"setMsgToSend\",value:function(t){this.setState({msgToSend:t.target.value})}},{key:\"setCustomEmailList\",value:function(t){var e=this;clearTimeout(this.typingTimeout);var s=t.target.value;this.typingTimeout=setTimeout((function(){var t=s.length>1?s.replace(\" \",\"\").replace(\",\",\"\\n\").split(\"\\n\").filter(Boolean):[],i=e.state.pointsToUse;t.length>e.state.customEmailList.length&&(i=t.length-e.state.customEmailList.length+e.state.pointsToUse),t.length<e.state.customEmailList.length&&(i=e.state.pointsToUse-(e.state.customEmailList.length-t.length)),0==t.length&&(i=e.state.pointsToUse-e.state.customEmailList.length),e.setState({customEmailList:t,pointsToUse:i})}),800)}},{key:\"setDecisorOn\",value:function(){this.state.pointsToUse>0?null==this.state.from||null==this.state.subject||null==this.state.msgToSend?alert(\"Error: Some form(s) are left empty\"):this.setState({decisor:!0}):alert(\"Error: You cannot use 0 points\")}},{key:\"setDecisorOff\",value:function(){this.setState({decisor:!1})}},{key:\"setProductsOn\",value:function(){this.setState({products:!0})}},{key:\"setProductsOff\",value:function(){this.setState({products:!1})}},{key:\"render\",value:function(){return N(m.a.Fragment,null,N(v.a,null,N(\"title\",null,\"Dashboard\"),N(\"link\",{href:\"/css/bootstrap.css\",rel:\"stylesheet\"}),N(\"link\",{href:\"/css/dashboard.css\",rel:\"stylesheet\"})),N(\"div\",{className:this.state.pageLoading?\"loading\":\"loading hide\"},N(\"div\",{className:\"loadingio-spinner-eclipse-h5c55szghjc\"},N(\"div\",{className:\"ldio-3kphjdhe4ws\"},N(\"div\",null)))),N(\"div\",{className:this.state.products?\"decisor active\":\"decisor\"},N(\"div\",{className:\"container\",onClick:this.setProductsOff},N(\"div\",{className:\"row\"},N(\"div\",{className:\"col-md-4\"},N(\"div\",{className:\"product-details\"},N(\"h2\",null,\"Starter Pack\"),N(\"h2\",null,\"100 Points\"),N(\"h2\",null,\"1.00$\"),N(\"button\",null,\"Pay with PayPal\"))),N(\"div\",{className:\"col-md-4\"},N(\"div\",{className:\"product-details\"},N(\"h2\",null,\"Medium Pack\"),N(\"h2\",null,\"400 Points\"),N(\"h2\",null,\"2.50$\"),N(\"button\",{className:\"black\"},\"Pay with PayPal\"))),N(\"div\",{className:\"col-md-4\"},N(\"div\",{className:\"product-details\"},N(\"h2\",null,\"Marketer Pack\"),N(\"h2\",null,\"700 Points\"),N(\"h2\",null,\"5$\"),N(\"button\",null,\"Pay with PayPal\")))))),N(\"div\",{className:this.state.decisor?\"decisor active\":\"decisor\"},(t=this).state.pointsToUse<=t.state.points?N(\"div\",{className:\"container decisor-items-container\",onClick:t.setDecisorOff},N(\"div\",{className:\"row\"},N(\"div\",{className:\"col-md-12\"},N(\"h2\",null,\"You will use \",N(\"b\",null,t.state.pointsToUse),\" points.\",N(\"br\",null),N(\"br\",null),\"Points left: \",N(\"b\",null,t.state.points-t.state.pointsToUse),N(\"br\",null),N(\"br\",null),\"Are you sure?\")),N(\"div\",{className:t.state.decisorLoading?\"col-md-12 decisor-loading\":\"col-md-12 decisor-loading hide\"},N(\"div\",{className:\"loadingio-spinner-eclipse-h5c55szghjc\",style:{transform:\"scale(0.7)\"}},N(\"div\",{className:\"ldio-3kphjdhe4ws\"},N(\"div\",null)))),N(\"div\",{className:t.state.decisorLoading?\"col-md-12 row hide\":\"col-md-12 row\"},N(\"div\",{className:\"col-md-6\"},N(\"button\",{className:\"decisor-button\",onClick:t.sendRequest},\"Yes\")),N(\"div\",{className:\"col-md-6\"},N(\"button\",{className:\"decisor-button black\",onClick:t.setDecisorOff},\"No\"))))):N(\"div\",{className:\"container decisor-items-container\"},N(\"div\",{className:\"row\"},N(\"div\",{className:\"col-md-12\"},N(\"h2\",null,\"You don't have enough points.\",N(\"br\",null),N(\"br\",null),\"You need \",t.state.pointsToUse-t.state.points==1?t.state.pointsToUse-t.points+\" point\":t.state.pointsToUse-t.points+\" points\",\".\")),N(\"div\",{className:\"col-md-12 row\"},N(\"div\",{className:\"col-md-6\"},N(\"button\",{className:\"decisor-button\"},\"Add Points\")),N(\"div\",{className:\"col-md-6\"},N(\"button\",{className:\"decisor-button black\",onClick:t.setDecisorOff},\"Close\")))))),N(\"div\",{className:\"container-fluid\"},N(\"div\",{className:\"row center\"},N(\"div\",{className:\"col-md-4\"},N(\"div\",{className:\"statistics-block\"},N(\"h2\",null,\"E-Mails Sent\"),N(\"h3\",null,this.state.sent))),N(\"div\",{className:\"col-md-4\"},N(\"div\",{className:\"statistics-block\"},N(\"h2\",null,\"Available Points\"),N(\"h3\",null,this.state.points))),N(\"div\",{className:\"col-md-4\"},N(\"div\",{className:\"statistics-block\"},N(\"h2\",null,\"Total E-Mails Sent\"),N(\"h3\",null,this.state.totalEmailsSent)))),N(\"div\",{className:\"row\",style:{margin:\"5rem 0\"}},N(\"div\",{className:\"col-md-4 input-block center\"},N(\"h3\",null,\"Custom E-Mail List\"),N(\"textarea\",{className:\"custom-list\",type:\"text\",placeholder:\"Leave blank if you don't want to add custom E-Mails\",onChange:this.setCustomEmailList}),N(\"button\",{style:{padding:\"1rem 36.5%\"},onClick:this.setProductsOn},\"Add Points\")),N(\"div\",{className:\"col-md-8 input-block center\"},N(\"h3\",null,\"Template\"),N(\"div\",{className:\"col-md-2 inputter\"},N(\"input\",{type:\"number\",className:\"center\",placeholder:\"Amount\",onChange:this.setPointsToUse})),N(\"div\",{className:\"col-md-5 inputter\"},N(\"input\",{type:\"text\",className:\"center\",placeholder:\"From\",onChange:this.setFrom})),N(\"div\",{className:\"col-md-5 inputter\"},N(\"input\",{type:\"text\",className:\"center\",placeholder:\"Subject\",onChange:this.setSubject})),N(\"div\",{className:\"col-md-12\"},N(\"textarea\",{type:\"text\",placeholder:\"Enter your Custom HTML or your Message\",onChange:this.setMsgToSend}),N(\"button\",{onClick:this.setDecisorOn},\"Send!\"))))));var t}}],[{key:\"getInitialProps\",value:function(t){var e,s;return a.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return e=t.req,s=t.res,i.abrupt(\"return\",Object(g.a)(e,s));case 2:case\"end\":return i.stop()}}),null,null,null,Promise)}}]),i}(m.a.Component)},QI6j:function(t,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/dashboard\",function(){return s(\"NYfH\")}])},\"iVi/\":function(t,e,s){\"use strict\";e.parse=function(t,e){if(\"string\"!==typeof t)throw new TypeError(\"argument str must be a string\");for(var s={},a=e||{},o=t.split(n),r=a.decode||i,c=0;c<o.length;c++){var u=o[c],d=u.indexOf(\"=\");if(!(d<0)){var m=u.substr(0,d).trim(),h=u.substr(++d,u.length).trim();'\"'==h[0]&&(h=h.slice(1,-1)),void 0==s[m]&&(s[m]=l(h,r))}}return s},e.serialize=function(t,e,s){var i=s||{},n=i.encode||a;if(\"function\"!==typeof n)throw new TypeError(\"option encode is invalid\");if(!o.test(t))throw new TypeError(\"argument name is invalid\");var l=n(e);if(l&&!o.test(l))throw new TypeError(\"argument val is invalid\");var r=t+\"=\"+l;if(null!=i.maxAge){var c=i.maxAge-0;if(isNaN(c))throw new Error(\"maxAge should be a Number\");r+=\"; Max-Age=\"+Math.floor(c)}if(i.domain){if(!o.test(i.domain))throw new TypeError(\"option domain is invalid\");r+=\"; Domain=\"+i.domain}if(i.path){if(!o.test(i.path))throw new TypeError(\"option path is invalid\");r+=\"; Path=\"+i.path}if(i.expires){if(\"function\"!==typeof i.expires.toUTCString)throw new TypeError(\"option expires is invalid\");r+=\"; Expires=\"+i.expires.toUTCString()}i.httpOnly&&(r+=\"; HttpOnly\");i.secure&&(r+=\"; Secure\");if(i.sameSite){switch(\"string\"===typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:r+=\"; SameSite=Strict\";break;case\"lax\":r+=\"; SameSite=Lax\";break;case\"strict\":r+=\"; SameSite=Strict\";break;case\"none\":r+=\"; SameSite=None\";break;default:throw new TypeError(\"option sameSite is invalid\")}}return r};var i=decodeURIComponent,a=encodeURIComponent,n=/; */,o=/^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;function l(t,e){try{return e(t)}catch(s){return t}}},lsd1:function(t,e,s){\"use strict\";var i=s(\"iVi/\"),a=s.n(i);e.a=function(t,e){if(void 0!=t&&void 0!=t.headers&&void 0!=t.headers.cookie&&null!=t.headers.cookie){var s=a.a.parse(t.headers.cookie);if(s.id)return{loggedIn:!0,id:s.id};e&&(e.writeHead(302,{Location:\"/login\"}),e.end())}return{loggedIn:!1,id:null}}}},[[\"QI6j\",0,2,1,3]]]);"}