{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{NYfH:function(e,t,s){\"use strict\";s.r(t),s.d(t,\"default\",(function(){return w}));var i=s(\"o0o1\"),n=s.n(i),o=s(\"1OyB\"),a=s(\"vuIU\"),r=s(\"JX7q\"),l=s(\"Ji7U\"),c=s(\"md7G\"),d=s(\"foSv\"),u=s(\"q1tI\"),m=s.n(u),p=s(\"nOHt\"),h=s.n(p),f=s(\"8Kt/\"),v=s.n(f),b=s(\"lsd1\"),g=s(\"vDqi\"),S=s.n(g),y=m.a.createElement;function N(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var w=function(e){Object(l.a)(i,e);var t,s=(t=i,function(){var e,s=Object(d.a)(t);if(N()){var i=Object(d.a)(this).constructor;e=Reflect.construct(s,arguments,i)}else e=s.apply(this,arguments);return Object(c.a)(this,e)});function i(e){var t;return Object(o.a)(this,i),(t=s.call(this,e)).state={sent:0,points:0,pointsToUse:0,msgToSend:null,customEmailList:\"\",totalEmailsSent:0,pageLoading:!0,decisor:!1,decisorLoading:!1,decisorResult:!1},t.setDecisorOn=t.setDecisorOn.bind(Object(r.a)(t)),t.setDecisorOff=t.setDecisorOff.bind(Object(r.a)(t)),t.setPointsToUse=t.setPointsToUse.bind(Object(r.a)(t)),t.setMsgToSend=t.setMsgToSend.bind(Object(r.a)(t)),t.setCustomEmailList=t.setCustomEmailList.bind(Object(r.a)(t)),t.sendRequest=t.sendRequest.bind(Object(r.a)(t)),t}return Object(a.a)(i,[{key:\"componentDidMount\",value:function(){var e=this;this.props.loggedIn&&null!=this.props.id&&S()({url:\"/api/user\",method:\"POST\",data:{id:this.props.id}}).then((function(t){e.setState({sent:t.data.sent,points:t.data.points,totalEmailsSent:t.data.totalEmailsSent,pageLoading:!1})})).catch((function(e){return h.a.push(\"/login\")}))}},{key:\"sendRequest\",value:function(){var e=this;null!=this.state.msgToSend?(this.setState({decisorLoading:!0}),S()({url:\"/api/mailer\",method:\"POST\",data:{id:this.props.id,pointsToUse:this.state.pointsToUse,msgToSend:this.state.msgToSend,customEmailList:this.state.customEmailList}}).then((function(t){200==t.status&&e.setState({decisor:!1,decisorLoading:!1,decisorResult:!0,points:e.state.points-e.state.pointsToUse,totalEmailsSent:e.state.pointsToUse})})).catch((function(t){e.setState({decisorLoading:!1,decisorResult:!1})}))):alert(\"Your message is empty!\")}},{key:\"setPointsToUse\",value:function(e){this.setState({pointsToUse:e.target.value})}},{key:\"setMsgToSend\",value:function(e){this.setState({msgToSend:e.target.value})}},{key:\"setCustomEmailList\",value:function(e){this.setState({customEmailList:e.target.value})}},{key:\"setDecisorOn\",value:function(){this.setState({decisor:!0})}},{key:\"setDecisorOff\",value:function(){this.setState({decisor:!1})}},{key:\"render\",value:function(){return y(m.a.Fragment,null,y(v.a,null,y(\"title\",null,\"Dashboard\"),y(\"link\",{href:\"/css/bootstrap.css\",rel:\"stylesheet\"}),y(\"link\",{href:\"/css/dashboard.css\",rel:\"stylesheet\"})),y(\"div\",{className:this.state.pageLoading?\"loading\":\"loading hide\"},y(\"div\",{className:\"loadingio-spinner-eclipse-h5c55szghjc\"},y(\"div\",{className:\"ldio-3kphjdhe4ws\"},y(\"div\",null)))),y(\"div\",{className:this.state.decisor?\"decisor active\":\"decisor\"},(e=this).state.pointsToUse<=e.state.points?y(\"div\",{className:\"container decisor-items-container\"},y(\"div\",{className:\"row\"},y(\"div\",{className:\"col-md-12\"},y(\"h2\",null,\"You will use \",y(\"b\",null,e.state.pointsToUse),\" points.\",y(\"br\",null),y(\"br\",null),\"Points left: \",y(\"b\",null,e.state.points-e.state.pointsToUse),y(\"br\",null),y(\"br\",null),\"Are you sure?\")),y(\"div\",{className:e.state.decisorLoading?\"col-md-12 decisor-loading\":\"col-md-12 decisor-loading hide\"},y(\"div\",{className:\"loadingio-spinner-eclipse-h5c55szghjc\",style:{transform:\"scale(0.7)\"}},y(\"div\",{className:\"ldio-3kphjdhe4ws\"},y(\"div\",null)))),y(\"div\",{className:e.state.decisorLoading?\"col-md-12 row hide\":\"col-md-12 row\"},y(\"div\",{className:\"col-md-6\"},y(\"button\",{className:\"decisor-button\",onClick:e.sendRequest},\"Yes\")),y(\"div\",{className:\"col-md-6\"},y(\"button\",{className:\"decisor-button black\"},\"No\"))))):y(\"div\",{className:\"container decisor-items-container\"},y(\"div\",{className:\"row\"},y(\"div\",{className:\"col-md-12\"},y(\"h2\",null,\"You don't have enough points.\",y(\"br\",null),y(\"br\",null),\"You need \",e.state.pointsToUse-e.state.points==1?e.state.pointsToUse-e.points+\" point\":e.state.pointsToUse-e.points+\" points\",\".\")),y(\"div\",{className:\"col-md-12 row\"},y(\"div\",{className:\"col-md-6\"},y(\"button\",{className:\"decisor-button\"},\"Add Points\")),y(\"div\",{className:\"col-md-6\"},y(\"button\",{className:\"decisor-button black\",onClick:e.setDecisorOff},\"Close\")))))),y(\"div\",{className:\"container-fluid\"},y(\"div\",{className:\"row center\"},y(\"div\",{className:\"col-md-4\"},y(\"div\",{className:\"statistics-block\"},y(\"h2\",null,\"E-Mails Sent\"),y(\"h3\",null,this.state.sent))),y(\"div\",{className:\"col-md-4\"},y(\"div\",{className:\"statistics-block\"},y(\"h2\",null,\"Available Points\"),y(\"h3\",null,this.state.points))),y(\"div\",{className:\"col-md-4\"},y(\"div\",{className:\"statistics-block\"},y(\"h2\",null,\"Total E-Mails Sent\"),y(\"h3\",null,this.state.totalEmailsSent)))),y(\"div\",{className:\"row\",style:{margin:\"5rem 0\"}},y(\"div\",{className:\"col-md-4 input-block center\"},y(\"h3\",null,\"Custom E-Mail List (Seperate by comma)\"),y(\"textarea\",{className:\"custom-list\",type:\"text\",placeholder:\"Leave blank if you don't want to add custom E-Mails\",onChange:this.setCustomEmailList})),y(\"div\",{className:\"col-md-8 input-block center\"},y(\"h3\",null,\"Template\"),y(\"input\",{type:\"number\",className:\"center\",placeholder:\"Total E-Mails to be sent\",onChange:this.setPointsToUse}),y(\"textarea\",{type:\"text\",placeholder:\"Enter your Custom HTML or your Message\",onChange:this.setMsgToSend}),y(\"button\",{onClick:this.setDecisorOn},\"Send!\")))));var e}}],[{key:\"getInitialProps\",value:function(e){var t,s;return n.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.req,s=e.res,i.abrupt(\"return\",Object(b.a)(t,s));case 2:case\"end\":return i.stop()}}),null,null,null,Promise)}}]),i}(m.a.Component)},QI6j:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/dashboard\",function(){return s(\"NYfH\")}])},\"iVi/\":function(e,t,s){\"use strict\";t.parse=function(e,t){if(\"string\"!==typeof e)throw new TypeError(\"argument str must be a string\");for(var s={},n=t||{},a=e.split(o),l=n.decode||i,c=0;c<a.length;c++){var d=a[c],u=d.indexOf(\"=\");if(!(u<0)){var m=d.substr(0,u).trim(),p=d.substr(++u,d.length).trim();'\"'==p[0]&&(p=p.slice(1,-1)),void 0==s[m]&&(s[m]=r(p,l))}}return s},t.serialize=function(e,t,s){var i=s||{},o=i.encode||n;if(\"function\"!==typeof o)throw new TypeError(\"option encode is invalid\");if(!a.test(e))throw new TypeError(\"argument name is invalid\");var r=o(t);if(r&&!a.test(r))throw new TypeError(\"argument val is invalid\");var l=e+\"=\"+r;if(null!=i.maxAge){var c=i.maxAge-0;if(isNaN(c))throw new Error(\"maxAge should be a Number\");l+=\"; Max-Age=\"+Math.floor(c)}if(i.domain){if(!a.test(i.domain))throw new TypeError(\"option domain is invalid\");l+=\"; Domain=\"+i.domain}if(i.path){if(!a.test(i.path))throw new TypeError(\"option path is invalid\");l+=\"; Path=\"+i.path}if(i.expires){if(\"function\"!==typeof i.expires.toUTCString)throw new TypeError(\"option expires is invalid\");l+=\"; Expires=\"+i.expires.toUTCString()}i.httpOnly&&(l+=\"; HttpOnly\");i.secure&&(l+=\"; Secure\");if(i.sameSite){switch(\"string\"===typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:l+=\"; SameSite=Strict\";break;case\"lax\":l+=\"; SameSite=Lax\";break;case\"strict\":l+=\"; SameSite=Strict\";break;case\"none\":l+=\"; SameSite=None\";break;default:throw new TypeError(\"option sameSite is invalid\")}}return l};var i=decodeURIComponent,n=encodeURIComponent,o=/; */,a=/^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;function r(e,t){try{return t(e)}catch(s){return e}}},lsd1:function(e,t,s){\"use strict\";var i=s(\"iVi/\"),n=s.n(i);t.a=function(e,t){if(void 0!=e&&void 0!=e.headers&&void 0!=e.headers.cookie&&null!=e.headers.cookie){var s=n.a.parse(e.headers.cookie);if(s.id)return{loggedIn:!0,id:s.id};t&&(t.writeHead(302,{Location:\"/login\"}),t.end())}return{loggedIn:!1,id:null}}}},[[\"QI6j\",0,2,1,3]]]);"}