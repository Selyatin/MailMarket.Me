{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/Web Apps/MailMarket.me/mailmarket.me/pages/dashboard.jsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from \"next/head\";\nimport checkAuth from \"../lib/checkAuth\";\nimport axios from \"axios\";\nexport default class DashBoardIndex extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      sent: 0,\n      points: 0,\n      pointsToUse: 0,\n      msgToSend: null,\n      customEmailList: \"\",\n      leads: 0,\n      pageLoading: true,\n      decisor: false,\n      decisorLoading: false,\n      decisorResult: false\n    };\n    this.setDecisorOn = this.setDecisorOn.bind(this);\n    this.setDecisorOff = this.setDecisorOff.bind(this);\n    this.setPointsToUse = this.setPointsToUse.bind(this);\n    this.setMsgToSend = this.setMsgToSend.bind(this);\n    this.setCustomEmailList = this.setCustomEmailList.bind(this);\n  }\n\n  static async getInitialProps({\n    req,\n    res\n  }) {\n    return checkAuth(req, res);\n  }\n\n  componentDidMount() {\n    if (this.props.loggedIn && this.props.id != null) {\n      axios({\n        url: \"/api/user\",\n        method: \"POST\",\n        data: {\n          id: this.props.id\n        }\n      }).then(response => {\n        this.setState({\n          sent: response.data.sent,\n          points: response.data.points,\n          leads: response.data.leads,\n          pageLoading: false\n        });\n      }).catch(err => {\n        alert(\"Authentacion error!\");\n      });\n    }\n  }\n\n  sendRequest() {\n    if (this.state.msgToSend != null) {\n      this.setState({\n        decisorLoading: true\n      });\n      axios({\n        url: \"/api/mailer\",\n        method: \"POST\",\n        data: {\n          id: this.props.id,\n          pointsToUse: this.state.pointsToUse,\n          msgToSend: this.state.msgToSend,\n          customEmailList: this.state.customEmailList\n        }\n      }).then(result => {\n        if (result.status == 200) {\n          this.setState({\n            decisorLoading: false,\n            decisorResult: true,\n            points: this.state.points - this.state.pointsToUse\n          });\n        }\n      }).catch(err => {\n        this.setState({\n          decisorLoading: false,\n          decisorResult: false\n        });\n      });\n    } else {\n      alert(\"Your message is empty!\");\n    }\n  }\n\n  setPointsToUse(elem) {\n    this.setState({\n      pointsToUse: elem.target.value\n    });\n  }\n\n  setMsgToSend(elem) {\n    this.setState({\n      msgToSend: elem.target.value\n    });\n  }\n\n  setCustomEmailList(elem) {\n    this.setState({\n      customEmailList: elem.target.value\n    });\n  }\n\n  setDecisorOn() {\n    this.setState({\n      decisor: true\n    });\n  }\n\n  setDecisorOff() {\n    this.setState({\n      decisor: false\n    });\n  }\n\n  render() {\n    function decisorDom(points, pointsToUse, setDecisorOff) {\n      if (pointsToUse <= points) {\n        return __jsx(\"div\", {\n          className: \"container decisor-items-container\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 21\n          }\n        }, __jsx(\"div\", {\n          className: \"row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 25\n          }\n        }, __jsx(\"div\", {\n          className: \"col-md-12\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 29\n          }\n        }, __jsx(\"h2\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 33\n          }\n        }, \"You will use \", __jsx(\"b\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 50\n          }\n        }, pointsToUse), \" points.\", __jsx(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 78\n          }\n        }), __jsx(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 87\n          }\n        }), \"Points left: \", __jsx(\"b\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 109\n          }\n        }, points - pointsToUse), __jsx(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 138\n          }\n        }), __jsx(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 147\n          }\n        }), \"Are you sure?\")), __jsx(\"div\", {\n          className: \"col-md-12 row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 29\n          }\n        }, __jsx(\"div\", {\n          className: \"col-md-6\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 33\n          }\n        }, __jsx(\"button\", {\n          className: \"decisor-button\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 37\n          }\n        }, \"Yes\")), __jsx(\"div\", {\n          className: \"col-md-6\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 33\n          }\n        }, __jsx(\"button\", {\n          className: \"decisor-button black\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 37\n          }\n        }, \"No\")))));\n      } else {\n        return __jsx(\"div\", {\n          className: \"container decisor-items-container\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 21\n          }\n        }, __jsx(\"div\", {\n          className: \"row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }\n        }, __jsx(\"div\", {\n          className: \"col-md-12\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 29\n          }\n        }, __jsx(\"h2\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 33\n          }\n        }, \"You don't have enough points.\", __jsx(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 66\n          }\n        }), __jsx(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 75\n          }\n        }), \"You need \", pointsToUse - points == 1 ? pointsToUse - points + \" point\" : pointsToUse - points + \" points\", \".\")), __jsx(\"div\", {\n          className: \"col-md-12 row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 29\n          }\n        }, __jsx(\"div\", {\n          className: \"col-md-6\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 33\n          }\n        }, __jsx(\"button\", {\n          className: \"decisor-button\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 37\n          }\n        }, \"Add Points\")), __jsx(\"div\", {\n          className: \"col-md-6\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 33\n          }\n        }, __jsx(\"button\", {\n          className: \"decisor-button black\",\n          onClick: setDecisorOff,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 37\n          }\n        }, \"Close\")))));\n      }\n    }\n\n    return __jsx(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }\n    }, __jsx(Head, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }\n    }, __jsx(\"title\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }\n    }, \"Dashboard\"), __jsx(\"link\", {\n      href: \"/css/bootstrap.css\",\n      rel: \"stylesheet\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 21\n      }\n    }), __jsx(\"link\", {\n      href: \"/css/dashboard.css\",\n      rel: \"stylesheet\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 21\n      }\n    })), __jsx(\"div\", {\n      className: this.state.pageLoading ? \"loading\" : \"loading hide\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      class: \"loadingio-spinner-eclipse-h5c55szghjc\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 25\n      }\n    }, __jsx(\"div\", {\n      class: \"ldio-3kphjdhe4ws\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 29\n      }\n    }, __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 29\n      }\n    })))), __jsx(\"div\", {\n      className: this.state.decisor ? \"decisor active\" : \"decisor\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }\n    }, decisorDom(this.state.points, this.state.pointsToUse, this.setDecisorOff)), __jsx(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      className: \"row center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 21\n      }\n    }, __jsx(\"div\", {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 25\n      }\n    }, __jsx(\"div\", {\n      className: \"statistics-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 29\n      }\n    }, __jsx(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 33\n      }\n    }, \"E-Mails Sent\"), __jsx(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 33\n      }\n    }, this.state.sent))), __jsx(\"div\", {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 25\n      }\n    }, __jsx(\"div\", {\n      className: \"statistics-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 29\n      }\n    }, __jsx(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 33\n      }\n    }, \"Available Points\"), __jsx(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 33\n      }\n    }, this.state.points))), __jsx(\"div\", {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 25\n      }\n    }, __jsx(\"div\", {\n      className: \"statistics-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 29\n      }\n    }, __jsx(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 33\n      }\n    }, \"Leads\"), __jsx(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 33\n      }\n    }, this.state.leads)))), __jsx(\"div\", {\n      className: \"row\",\n      style: {\n        margin: \"5rem 0\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 21\n      }\n    }, __jsx(\"div\", {\n      className: \"col-md-4 input-block center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 25\n      }\n    }, __jsx(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 29\n      }\n    }, \"Custom E-Mail List (Seperate by comma)\"), __jsx(\"textarea\", {\n      className: \"custom-list\",\n      type: \"text\",\n      placeholder: \"Leave blank if you don't want to add custom E-Mails\",\n      onChange: this.setCustomEmailList,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 29\n      }\n    })), __jsx(\"div\", {\n      className: \"col-md-8 input-block center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 25\n      }\n    }, __jsx(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 29\n      }\n    }, \"Template\"), __jsx(\"input\", {\n      type: \"number\",\n      className: \"center\",\n      placeholder: \"Total E-Mails to be sent\",\n      onChange: this.setPointsToUse,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 29\n      }\n    }), __jsx(\"textarea\", {\n      type: \"text\",\n      placeholder: \"Enter your Custom HTML or your Message\",\n      onChange: this.setMsgToSend,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 29\n      }\n    }), __jsx(\"button\", {\n      onClick: this.setDecisorOn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 29\n      }\n    }, \"Send!\")))));\n  }\n\n}","map":{"version":3,"sources":["/Users/mac/Desktop/Web Apps/MailMarket.me/mailmarket.me/pages/dashboard.jsx"],"names":["Head","checkAuth","axios","DashBoardIndex","React","Component","constructor","props","state","sent","points","pointsToUse","msgToSend","customEmailList","leads","pageLoading","decisor","decisorLoading","decisorResult","setDecisorOn","bind","setDecisorOff","setPointsToUse","setMsgToSend","setCustomEmailList","getInitialProps","req","res","componentDidMount","loggedIn","id","url","method","data","then","response","setState","catch","err","alert","sendRequest","result","status","elem","target","value","render","decisorDom","margin"],"mappings":"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","sourcesContent":["import Head from \"next/head\";\nimport checkAuth from \"../lib/checkAuth\";\nimport axios from \"axios\";\nexport default class DashBoardIndex extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            sent: 0,\n            points: 0,\n            pointsToUse: 0,\n            msgToSend: null,\n            customEmailList: \"\",\n            leads: 0,\n            pageLoading: true,\n            decisor: false,\n            decisorLoading: false,\n            decisorResult: false,\n        }\n\n        this.setDecisorOn = this.setDecisorOn.bind(this);\n        this.setDecisorOff = this.setDecisorOff.bind(this);\n        this.setPointsToUse = this.setPointsToUse.bind(this);\n        this.setMsgToSend = this.setMsgToSend.bind(this);\n        this.setCustomEmailList = this.setCustomEmailList.bind(this);\n    }\n\n    static async getInitialProps({ req, res }) {\n        return checkAuth(req, res);\n    }\n\n    componentDidMount() {\n        if (this.props.loggedIn && this.props.id != null) {\n            axios({\n                url: \"/api/user\",\n                method: \"POST\",\n                data: {\n                    id: this.props.id\n                }\n            }).then(response => {\n                this.setState({\n                    sent: response.data.sent,\n                    points: response.data.points,\n                    leads: response.data.leads,\n                    pageLoading: false\n                });\n            }).catch(err => {\n                alert(\"Authentacion error!\");\n            });\n        }\n    }\n\n    sendRequest(){\n        if(this.state.msgToSend != null){\n            this.setState({\n                decisorLoading: true,\n            });\n            axios({\n                url: \"/api/mailer\",\n                method: \"POST\",\n                data: {\n                    id: this.props.id,\n                    pointsToUse: this.state.pointsToUse,\n                    msgToSend: this.state.msgToSend,\n                    customEmailList: this.state.customEmailList\n                }\n            }).then(result => {\n                if(result.status == 200){\n                    this.setState({\n                        decisorLoading: false,\n                        decisorResult: true,\n                        points: this.state.points - this.state.pointsToUse\n                    })\n                }\n            }).catch(err => {\n                this.setState({\n                    decisorLoading: false,\n                    decisorResult: false,\n                })\n            });\n        }else {\n            alert(\"Your message is empty!\");\n        }\n    }\n\n\n    setPointsToUse(elem) {\n        this.setState({\n            pointsToUse: elem.target.value\n        })\n    }\n\n    setMsgToSend(elem) {\n        this.setState({\n            msgToSend: elem.target.value\n        })\n    }\n\n    setCustomEmailList(elem) {\n        this.setState({\n            customEmailList: elem.target.value\n        })\n    }\n\n    setDecisorOn() {\n        this.setState({\n            decisor: true,\n        });\n    }\n\n    setDecisorOff() {\n        this.setState({\n            decisor: false,\n        });\n    }\n\n    render() {\n\n        function decisorDom(points, pointsToUse, setDecisorOff) {\n            if (pointsToUse <= points) {\n                return (\n                    <div className=\"container decisor-items-container\">\n                        <div className=\"row\">\n                            <div className=\"col-md-12\">\n                                <h2>You will use <b>{pointsToUse}</b> points.<br></br><br></br>Points left: <b>{points - pointsToUse}</b><br></br><br></br>Are you sure?</h2>\n                            </div>\n                            <div className=\"col-md-12 row\">\n                                <div className=\"col-md-6\">\n                                    <button className=\"decisor-button\">Yes</button>\n                                </div>\n                                <div className=\"col-md-6\">\n                                    <button className=\"decisor-button black\">No</button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                );\n            } else {\n                return (\n                    <div className=\"container decisor-items-container\">\n                        <div className=\"row\">\n                            <div className=\"col-md-12\">\n                                <h2>You don't have enough points.<br></br><br></br>You need {pointsToUse - points == 1 ? pointsToUse - points + \" point\" : pointsToUse - points + \" points\"}.</h2>\n                            </div>\n                            <div className=\"col-md-12 row\">\n                                <div className=\"col-md-6\">\n                                    <button className=\"decisor-button\">Add Points</button>\n                                </div>\n                                <div className=\"col-md-6\">\n                                    <button className=\"decisor-button black\" onClick={setDecisorOff}>Close</button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                )\n            }\n        }\n\n\n        return (\n            <React.Fragment>\n                <Head>\n                    <title>Dashboard</title>\n                    <link href=\"/css/bootstrap.css\" rel=\"stylesheet\"></link>\n                    <link href=\"/css/dashboard.css\" rel=\"stylesheet\"></link>\n                </Head>\n                <div className={this.state.pageLoading ? \"loading\" : \"loading hide\"}>\n                        <div class=\"loadingio-spinner-eclipse-h5c55szghjc\">\n                            <div class=\"ldio-3kphjdhe4ws\">\n                            <div></div>\n                            </div>\n                            </div>\n                </div>\n                <div className={this.state.decisor ? \"decisor active\" : \"decisor\"}>\n                    {decisorDom(this.state.points, this.state.pointsToUse, this.setDecisorOff)}\n                </div>\n                <div className=\"container-fluid\">\n                    <div className=\"row center\">\n                        <div className=\"col-md-4\">\n                            <div className=\"statistics-block\">\n                                <h2>E-Mails Sent</h2>\n                                <h3>{this.state.sent}</h3>\n                            </div>\n                        </div>\n                        <div className=\"col-md-4\">\n                            <div className=\"statistics-block\">\n                                <h2>Available Points</h2>\n                                <h3>{this.state.points}</h3>\n                            </div>\n                        </div>\n                        <div className=\"col-md-4\">\n                            <div className=\"statistics-block\">\n                                <h2>Leads</h2>\n                                <h3>{this.state.leads}</h3>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"row\" style={{ margin: \"5rem 0\" }}>\n                        <div className=\"col-md-4 input-block center\">\n                            <h3>Custom E-Mail List (Seperate by comma)</h3>\n                            <textarea className=\"custom-list\" type=\"text\" placeholder=\"Leave blank if you don't want to add custom E-Mails\" onChange={this.setCustomEmailList}></textarea>\n                        </div>\n                        <div className=\"col-md-8 input-block center\">\n                            <h3>Template</h3>\n                            <input type=\"number\" className=\"center\" placeholder=\"Total E-Mails to be sent\" onChange={this.setPointsToUse}></input>\n                            <textarea type=\"text\" placeholder=\"Enter your Custom HTML or your Message\" onChange={this.setMsgToSend}></textarea>\n                            <button onClick={this.setDecisorOn}>Send!</button>\n                        </div>\n                    </div>\n                </div>\n            </React.Fragment>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}