{"ast":null,"code":"const MongoClient = require('mongodb').MongoClient;\n\nconst uri = \"mongodb+srv://main-user:09730Success@mailmarketme-k4esh.mongodb.net/test?retryWrites=true&w=majority\";\nconst client = new MongoClient(uri, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n});\nexport default ((req, res) => {\n  if (req.method === \"POST\" && req.body.username != undefined && req.body.username != null && req.body.password != undefined && req.body.password != null) {\n    client.connect(err => {\n      if (err) throw err;\n      const db = client.db(\"MailMarketMe\");\n      const username = req.body.username;\n      const password = req.body.password;\n      db.collection(\"accounts\").findOne({\n        email: username\n      }, (err, result) => {\n        if (result == null) {\n          db.collection(\"accounts\").insertOne({\n            email: username,\n            password: password,\n            sent: 0,\n            points: 100,\n            totalEmailsSent: 0\n          }, (err, result) => {\n            if (err) {\n              res.status(406).end();\n            } else {\n              res.status(200).end();\n            }\n          });\n        } else {\n          res.status(406).end();\n        }\n      });\n    });\n  } else {\n    res.status(404);\n  }\n});","map":null,"metadata":{},"sourceType":"module"}