{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport Head from \"next/head\";\nimport Router from \"next/router\";\nimport axios from \"axios\";\nimport checkAuth from \"../lib/checkAuth\";\nexport default class Form extends React.Component {\n  static async getInitialProps({\n    req,\n    res\n  }) {\n    const auth = checkAuth(req, res);\n\n    if (auth.loggedIn) {\n      res.writeHead(302, {\n        Location: \"/dashboard\"\n      });\n      res.end();\n    }\n\n    return auth;\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: null,\n      password: null\n    };\n    this.handleUsernameChange = this.handleUsernameChange.bind(this);\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\n    this.handleCreateAccount = this.handleCreateAccount.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleUsernameChange(event) {\n    this.setState({\n      username: event.target.value\n    });\n  }\n\n  handlePasswordChange(event) {\n    this.setState({\n      password: event.target.value\n    });\n  }\n\n  handleCreateAccount(event) {\n    Router.push(\"/register\");\n  }\n\n  handleSubmit(event) {\n    const res = axios({\n      method: \"POST\",\n      url: \"/api/auth\",\n      data: {\n        username: this.state.username,\n        password: this.state.password\n      }\n    }).then(response => {\n      if (response.status === 200) {\n        console.log(response.data);\n        document.cookie = \"id=\" + response.data + \";path=/\";\n        Router.push(\"/dashboard\");\n      }\n    }).catch(err => {\n      alert(\"Wrong credentials\");\n    });\n  }\n\n  render() {\n    return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", null, \"Login\"), __jsx(\"link\", {\n      href: \"/css/bootstrap.css\",\n      rel: \"stylesheet\"\n    }), __jsx(\"link\", {\n      href: \"/css/main.css\",\n      rel: \"stylesheet\"\n    })), __jsx(\"div\", {\n      className: \"container-fluid form-container\"\n    }, __jsx(\"div\", {\n      className: \"row\"\n    }, __jsx(\"div\", {\n      className: \"col-md-12\"\n    }, __jsx(\"div\", {\n      className: \"form\"\n    }, __jsx(\"h2\", null, \"Login\"), __jsx(\"input\", {\n      type: \"email\",\n      onChange: this.handleUsernameChange,\n      placeholder: \"E-Mail\"\n    }), __jsx(\"input\", {\n      type: \"password\",\n      onChange: this.handlePasswordChange,\n      placeholder: \"Password\"\n    }), __jsx(\"button\", {\n      onClick: this.handleSubmit\n    }, \"Login\"), __jsx(\"button\", {\n      onClick: this.handleCreateAccount\n    }, \"Create Account\"))))));\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}